<% provide(:title, "Want") %>
<% provide(:page_class, "want-show") %>
<h1 class="page-title light"><%= @goal.encrypted_goal %></h1>
<div class="goal-details">
  <% if @goal.improvements.size > 0 %>
    <p class="improvements-large">
      <span class="fa-stack">
        <%= fa_icon('trophy', class: "fa-stack-1x") %>
        <span class="fa-stack-1x improvements-count">
          <%= @goal.improvements.size %>
        </span>
      </span>
    </p>
  <% end %>
  <ul>
    <li>
      <%= fa_icon 'clock-o' %>
      <p>created <%= local_time_ago(@goal.created_at) %></p>
    </li>
    <li>
      <% if @goal.completed? %>
        <%= fa_icon 'check' %> 
        <p>completed <%= local_time_ago(@goal.completed_date) %></p>
      <% elsif @goal.active? %>
        <%= fa_icon 'play' %> 
        <p>you are actively improving this want</p>
      <% else %>
        <%= fa_icon 'pause' %> 
        <p>you have put this want on hold</p>
      <% end %>
    </li>
    <li>
      <%= fa_icon 'trophy' %> 
      <% if @goal.improvements.size > 0 %>
        <p>
          you have improved <%= pluralize(@goal.improvements.size, 'time') %>
        </p>
      <% elsif @goal.completed? %>
        <p>you have not acknowledged any improvements</p>
      <% else %>
        <p>you are working toward your first improvement</p>
      <% end %>
    </li>
    <% if !@goal.due_date.blank? %>
    <li>
      <%= fa_icon 'calendar' %> 
      <p>
        you want to achieve this by 
        <%= local_relative_time(@goal.due_date, type: 'weekday-or-date') %>
      </p>
    <% end %>
    </li>
  </ul>
</div>
<h2 class="line-span teal"><span>Haves</span></h2>
<div class="goal-improvements panel-group">
  <%= render(@improvements) || render('goals/helpers/first_improvement', 
                                  locals: {completed: @goal.completed} ) %>
</div>
<div class="goal-actions">
  <%= link_to fa_icon('pencil-square-o', text: 'Edit', right: true), 
        edit_goal_path(@goal), 
        class: 'btn btn-orange pull-right btn-lg' %>
</div>