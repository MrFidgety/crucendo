<% provide(:title, "All Questions") %>
<%= link_to "Add Question", new_admin_question_path,
                            class: "btn btn-primary" %>
<%= link_to "Manage Categories", admin_questions_categories_path, 
                                          class: "btn btn-primary" %>
<%= link_to "Manage Topics", admin_questions_topics_path, 
                                          class: "btn btn-primary" %>
<h1>All Questions</h1>
<%= form_tag admin_questions_path, :method => 'get', class: "search" do %>
  <%= hidden_field_tag :direction, params[:direction] %>
  <%= hidden_field_tag :sort, params[:sort] %>
  <%= text_field_tag :search, params[:search],
                              placeholder: "Enter search phrase",
                              class: "form-control" %>
  <%= select_tag :topic_id, 
        options_for_select(Topic.all.collect { |t| 
                              [ t.name, t.id ]}, params[:topic_id]), 
        { :include_blank => 'Select a topic', :class => 'form-control'  } %>
  <%= submit_tag "Find Question", :name => nil, class: "btn btn-default" %>
<% end %>
<table class="table">
  <thead>
    <tr>
      <th><%= sortable "content", "Question" %></th>
      <th><%= sortable "topics.name", "Topic" %></th>
      <th><%= sortable "categories.name", "Category" %></th>
      <th><%= sortable "active", "Active" %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  <% @questions.each do |question| %>
  <tr>
    <td><%= question.content %></td>
    <td><%= question.topic.name if question.topic %></td>
    <td><%= question.category.name %></td>
    <td><%= question.active? ? 'Yes' : 'No' %></td>
    <td><span class="pull-right">
      <%= link_to "edit", edit_admin_question_path(question) %></span>
    </td>
  </tr>
  <% end %>
</table>
<%= will_paginate @questions %>